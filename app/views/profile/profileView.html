<!-- app/views/profile/profileView.html -->
<div class="profile-container">
    <div class="profile-header">
        <button class="btn btn-back" ng-click="vm.goBack()">
            <i class="bi bi-arrow-left"></i> Voltar
        </button>
        <h2>Editar Perfil</h2>
    </div>

    <div class="profile-content" ng-if="!vm.loading">
        <div class="alert alert-success" ng-if="vm.success">
            {{ vm.success }}
        </div>
        <div class="alert alert-danger" ng-if="vm.error">
            {{ vm.error }}
        </div>

        <!-- Profile Image Section -->
        <div class="form-group" style="text-align:center; margin-bottom: 20px;">
            <img ng-src="{{vm.editedProfile.image && vm.editedProfile.image.medium.url}}" alt="Foto de Perfil" style="width:100px; height:100px; border-radius:50%; object-fit:cover; border:2px solid #ccc;">
            <div style="margin-top:10px;">
                <input type="file" class="form-control" accept="image/*" file-model="vm.newImageFile">
                <button class="btn btn-info" style="margin-top:5px;" ng-click="vm.uploadProfileImage()">Salvar Imagem</button>
            </div>
        </div>

        <form ng-submit="vm.updateProfile()">
            <div class="form-group">
                <label for="name">Nome Completo</label>
                <input type="text" class="form-control" id="name" ng-model="vm.editedProfile.name" required>
            </div>
            <div class="form-group">
                <label for="phone">Telefone</label>
                <input type="tel" class="form-control" id="phone" ng-model="vm.editedProfile.extra.phone">
            </div>
            <div class="form-group">
                <label for="cpf">CPF</label>
                <input type="text" class="form-control" id="cpf" ng-model="vm.editedProfile.extra.cpf">
            </div>
            <div class="form-group">
                <label for="birthdate">Data de Nascimento</label>
                <input type="date" class="form-control" id="birthdate" ng-model="vm.editedProfile.extra.birthdate">
            </div>
            <div class="form-group">
                <label for="cep">CEP</label>
                <input type="text" class="form-control" id="cep" ng-model="vm.editedProfile.extra.cep">
            </div>
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" ng-click="vm.goBack()">Cancelar</button>
                <button type="submit" class="btn btn-primary" ng-disabled="vm.loading">Salvar Alterações</button>
            </div>
        </form>
    </div>

    <div class="loading-spinner" ng-if="vm.loading">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Carregando...</span>
        </div>
    </div>
</div> 