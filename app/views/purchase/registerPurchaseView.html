<div class="register-purchase-container">
  <div ng-if="!vm.isLoggedIn()" class="alert alert-danger" style="margin-bottom: 24px;">
    <strong>Not logged in!</strong> Você não está autenticado. Faça login para registrar uma compra.
  </div>
  <h2>Registrar Compra</h2>
  <form name="registerPurchaseForm" ng-submit="vm.submit()" novalidate ng-if="vm.isLoggedIn()">
    <div class="form-group">
      <label for="purchaseValue">Valor da compra (R$)</label>
      <input type="number" id="purchaseValue" class="form-control" ng-model="vm.purchaseValue" min="0.01" step="0.01" required />
    </div>
    <div class="form-group mt-3">
      <label for="purchaseProof">Comprovante de compra</label>
      <input type="file" id="purchaseProof" class="form-control" accept="image/*" file-model="vm.purchaseProof" required />
    </div>
    <button type="submit" class="btn btn-primary mt-4" ng-disabled="!vm.purchaseValue || !vm.purchaseProof || vm.loading">Registrar</button>
  </form>
  <div class="mt-4" ng-if="vm.success">
    <div class="alert alert-success">
      <h4>Parabéns!</h4>
      <p>Sua compra foi registrada com sucesso.</p>
      <p><strong>Pontos:</strong> {{vm.updatedPoints}}</p>
      <p><strong>Cashback:</strong> R$ {{vm.updatedCashback}}</p>
    </div>
  </div>
  <div class="mt-4" ng-if="vm.error">
    <div class="alert alert-danger">
      {{vm.error}}
    </div>
  </div>
</div> 