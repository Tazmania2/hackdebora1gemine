<div class="dashboard-viewport">
  <div class="quiz-list-viewport" style="background: #181828; min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: flex-start; color: #fff; padding-top: 32px;">
    <div style="width: 100%; max-width: 400px;">
      <!-- Quiz List Mode -->
      <div ng-if="vm.mode === 'list'">
        <div style="text-align: center; margin-bottom: 24px;">
          <div style="font-size: 2.2rem; color: #ff2e93; font-weight: bold; margin-bottom: 8px;">Quiz</div>
          <div style="font-size: 1.2rem; color: #fff;">Selecione o Quiz que você deseja realizar!</div>
        </div>
        <div ng-if="vm.loading" style="text-align:center; color:#ff2e93; font-size:1.2rem; margin:32px 0;">Carregando quizzes...</div>
        <div ng-if="vm.error" style="text-align:center; color:#ff2e93; font-size:1.1rem; margin:32px 0;">{{vm.error}}</div>
        <div ng-if="!vm.loading && !vm.error">
          <div ng-repeat="quiz in vm.quizzes" style="margin-bottom: 18px;">
            <button ng-click="vm.selectQuiz(quiz)" style="width:100%; background:#181828; border:none; border-radius:32px; color:#ff2e93; font-size:1.2rem; font-weight:bold; padding:18px 0 8px 0; margin-bottom:4px; box-shadow:0 2px 8px rgba(0,0,0,0.10); display:flex; flex-direction:column; align-items:center;">
              <span style="font-size:1.1rem;">{{quiz.title}}</span>
              <span style="font-size:0.95rem; color:#ff2e93; margin-top:2px;">Você receberá: {{quiz.grade || 'XXX'}} <i class="bi bi-coin"></i></span>
            </button>
          </div>
          <div style="margin-top: 32px; color: #ff2e93; font-size: 1rem; text-align: center;">
            <b>*Atenção:</b><br>
            O quiz de conhecimentos gerais é recomendado apenas para os amantes mais fiéis dos produtos da Debora!
          </div>
        </div>
      </div>
      <!-- Quiz Questions Mode -->
      <div ng-if="vm.mode === 'questions'">
        <div style="text-align: center; margin-bottom: 18px;">
          <div style="font-size: 2.2rem; color: #ff2e93; font-weight: bold; margin-bottom: 8px;">Quiz</div>
          <div style="font-size: 1.1rem; color: #fff;">Testes seus conhecimentos<br>e <span style='color:#ff2e93;'>ganhe {{vm.quiz.grade || 'X'}} <i class='bi bi-coin'></i></span></div>
        </div>
        <div ng-if="vm.loading" style="text-align:center; color:#ff2e93; font-size:1.2rem; margin:32px 0;">Carregando perguntas...</div>
        <div ng-if="vm.error" style="text-align:center; color:#ff2e93; font-size:1.1rem; margin:32px 0;">{{vm.error}}</div>
        <form ng-if="!vm.loading && !vm.error && vm.questions.length" ng-submit="vm.submitQuiz()">
          <div ng-repeat="q in vm.questions" style="margin-bottom: 18px;">
            <div style="background:#181828; color:#ff2e93; font-weight:bold; font-size:1.1rem; border-radius:16px; padding:10px 18px; margin-bottom:6px;">{{$index+1}}. {{q.question}}</div>
            <div ng-repeat="choice in q.choices" style="background:#232323; border-radius:16px; margin-bottom:6px; padding:10px 12px; display:flex; align-items:center;">
              <input type="radio" name="q{{q._id}}" ng-value="choice.answer" ng-model="vm.answers[q._id][0]" ng-change="vm.selectAnswer(q._id, choice.answer)" style="margin-right:12px; accent-color:#ff2e93; width:20px; height:20px;">
              <span style="color:#fff; font-size:1rem;">{{choice.label}}</span>
            </div>
          </div>
          <button type="submit" style="width:100%; background:#ff2e93; color:#fff; border:none; border-radius:32px; font-size:1.2rem; font-weight:bold; padding:14px 0; margin-top:18px;">Enviar Respostas</button>
        </form>
      </div>
    </div>
  </div>
</div> 